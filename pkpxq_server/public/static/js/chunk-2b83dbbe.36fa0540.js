(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b83dbbe"],{"5b82":function(t,e,n){"use strict";n("aa3e")},aa3e:function(t,e,n){},b2c0:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var o=n("b775");function i(){return Object(o["a"])({url:"/app/list",method:"get"})}function a(t){return Object(o["a"])({url:"/app",method:"put",data:t})}},c419:function(t,e,n){},cc3d:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Draggable",{attrs:{group:"banner"},on:{change:t.saveBanner},model:{value:t.banner,callback:function(e){t.banner=e},expression:"banner"}},[n("transition-group",{staticClass:"list",attrs:{tag:"div"}},t._l(t.banner,(function(e,o){return n("div",{key:e,staticClass:"item"},[n("ImagePreview",{attrs:{src:e,width:"300px"}}),n("div",{staticClass:"close",on:{click:function(e){return t.delItem(o)}}},[n("i",{staticClass:"el-icon-close"})])],1)})),0)],1),n("div",{staticClass:"upload-btn"},[n("ImageCropper",{attrs:{"auto-crop-height":109,"auto-crop-width":300},on:{"upload-success":t.uploadSuccess}},[n("el-button",{staticStyle:{"font-size":"30px"},attrs:{type:"warning",icon:"el-icon-plus",circle:""}})],1)],1)],1)},i=[],a=n("c7eb"),r=n("1da1"),s=(n("14d9"),n("a434"),n("b76a")),l=n.n(s),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"user-info-head",on:{click:function(e){return t.editCropper()}}},[t._t("default",[n("el-button",[t._v("上传图片")])])],2),n("el-dialog",{attrs:{title:t.title,visible:t.open,width:"800px","append-to-body":""},on:{"update:visible":function(e){t.open=e},opened:t.modalOpened,close:t.closeDialog}},[n("el-row",[n("el-col",{style:{height:"350px"},attrs:{span:24}},[t.visible?n("vue-cropper",{ref:"cropper",attrs:{img:t.options.img,info:!0,autoCrop:t.options.autoCrop,autoCropWidth:t.options.autoCropWidth,autoCropHeight:t.options.autoCropHeight,fixedBox:t.options.fixedBox,outputType:t.options.outputType},on:{realTime:t.realTime}}):t._e()],1)],1),n("br"),n("el-row",[n("el-col",{attrs:{lg:2,sm:3,xs:3}},[n("el-upload",{attrs:{action:"#","http-request":t.requestUpload,"show-file-list":!1,"before-upload":t.beforeUpload}},[n("el-button",{attrs:{size:"small"}},[t._v(" 选择 "),n("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),n("el-col",{attrs:{lg:{span:1,offset:2},sm:2,xs:2}},[n("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.changeScale(1)}}})],1),n("el-col",{attrs:{lg:{span:1,offset:1},sm:2,xs:2}},[n("el-button",{attrs:{icon:"el-icon-minus",size:"small"},on:{click:function(e){return t.changeScale(-1)}}})],1),n("el-col",{attrs:{lg:{span:1,offset:1},sm:2,xs:2}},[n("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small"},on:{click:function(e){return t.rotateLeft()}}})],1),n("el-col",{attrs:{lg:{span:1,offset:1},sm:2,xs:2}},[n("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:function(e){return t.rotateRight()}}})],1),n("el-col",{attrs:{lg:{span:2,offset:6},sm:2,xs:2}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.uploadImg()}}},[t._v("提 交")])],1)],1)],1)],1)},u=[],p=(n("a9e3"),n("b0c0"),n("4360")),f=n("7e79"),d=n("ed08"),h=n("b775"),b=n("5f87");function m(t){return Object(h["a"])({url:"/upload",method:"post",headers:{"Content-Type":"multipart/form-data",Authorization:Object(b["a"])()},data:t})}var g={components:{VueCropper:f["VueCropper"]},props:{src:String,autoCropWidth:{type:Number,default:200},autoCropHeight:{type:Number,default:200},uploadHandle:{type:Function,default:m}},emits:["upload-success"],data:function(){return{open:!1,visible:!1,title:"裁剪图片",options:{img:this.src,autoCrop:!0,autoCropWidth:this.autoCropWidth,autoCropHeight:this.autoCropHeight,fixedBox:!0,outputType:"png",filename:"image"},previews:{},resizeHandler:null}},methods:{editCropper:function(){this.open=!0},modalOpened:function(){var t=this;this.visible=!0,this.resizeHandler||(this.resizeHandler=Object(d["d"])((function(){t.refresh()}),100)),window.addEventListener("resize",this.resizeHandler)},refresh:function(){this.$refs.cropper.refresh()},requestUpload:function(){},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},changeScale:function(t){t=t||1,this.$refs.cropper.changeScale(t)},beforeUpload:function(t){var e=this;if(-1==t.type.indexOf("image/"))this.$modal.msgError("文件格式错误，请上传图片类型,如：JPG，PNG后缀的文件。");else{var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e.options.img=n.result,e.options.filename=t.name}}},uploadImg:function(){var t=this;this.$refs.cropper.getCropBlob((function(e){var n=new FormData;n.append("file",e,t.options.filename),t.uploadHandle(n).then((function(e){t.open=!1,t.options.img=e.data.filePath,t.visible=!1,t.$emit("upload-success",e.data)}))}))},realTime:function(t){this.previews=t},closeDialog:function(){this.options.img=p["a"].getters.avatar,this.visible=!1,window.removeEventListener("resize",this.resizeHandler)}}},v=g,C=(n("5b82"),n("2877")),w=Object(C["a"])(v,c,u,!1,null,"517df359",null),x=w.exports,y=n("b2c0"),z={components:{Draggable:l.a,ImageCropper:x},props:{list:Array},data:function(){return{banner:[]}},watch:{list:function(t){this.banner=t}},methods:{saveBanner:function(){var t=this;return Object(r["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(y["b"])({name:"banner",value:t.banner}).then((function(e){t.$modal.msgSuccess("修改成功")}));case 1:case"end":return e.stop()}}),e)})))()},uploadSuccess:function(t){var e=t.filePath;this.banner.push(e),this.saveBanner()},delItem:function(t){this.banner.splice(t,1),this.saveBanner()}}},O=z,k=(n("f582"),Object(C["a"])(O,o,i,!1,null,"c204bcba",null));e["default"]=k.exports},f582:function(t,e,n){"use strict";n("c419")}}]);